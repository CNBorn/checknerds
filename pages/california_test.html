<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta name="description" content="Your description goes here" />
	<meta name="keywords" content="your,keywords,goes,here" />
	<meta name="author" content="Your Name" />
<!-- from former CheckNerds -->
<script type="text/javascript" src="/js/jquery-1.3.2.min.js"></script>
<script type="text/javascript" src="/js/jquery.form.js"></script>
<link rel="stylesheet" media="screen" type="text/css" href="/css/datepicker.css" />
<script type="text/javascript" src="/js/datepicker.js"></script>
<!-- from former CheckNerds -->
	<link rel="stylesheet" type="text/css" href="{{PrefixCSSdir}}css/calit2.css" title="1024px" media="screen,projection" />
	<title>CheckNerds California test</title>
</head>
<script type="text/javascript">
/*
Planning to have a js function here to handle the tab->activetab issue.
$('#content').load('/ajax/frontpage_getfriendstats');
$('#tab_dailyroutine').
$('#content').load('/ajax/render/?func=done&template=calit2');
 */

$(function(){
//Common function for centering a div.
//http://stackoverflow.com/questions/210717/what-is-the-best-way-to-center-a-div-on-the-screen-using-jquery/
jQuery.fn.center = function () {
    this.css("position","absolute");
    this.css("top", ( $(window).height() - this.height() ) / 3+$(window).scrollTop() + "px");
    this.css("left", ( $(window).width() - this.width() ) / 2+$(window).scrollLeft() + "px");
    return this;
}

function showLoadingPanel() {
    $("#loadingpanel").center();
    $("#loadingpanel").fadeIn('normal');
}

function hideLoadingPanel() {
    $("#loadingpanel").fadeOut('normal');
}


//Controls the Toggle.
$('span#toggle').click(function(){
    $(this).toggleClass("down");
});


//Functions for Tabs.
$('#tab_undone').click(function() {
    $('#content').load('/ajax/render/?func=undone&template=calit2');
    showLoadingPanel();
    $('#coutent').show('normal');
    hideLoadingPanel();
    return false;
});


$('#tab_dailyroutine').click(function() {
    $('#content').load('/ajax/render/?func=dailyroutine&template=calit2');
    showLoadingPanel();
    $('#coutent').show('normal');
    hideLoadingPanel();
    return false;
});

$('#tab_done').click(function() {
    $('#content').load('/ajax/render/?func=done&template=calit2');
    showLoadingPanel();
    $('#coutent').show('normal');
    hideLoadingPanel();
    return false;
});

//Functions to run during loading..
hideLoadingPanel();
$('#tab_undone').click();




//Enter to submit.
$("#inputName").keypress(function (e) {  
    if ((e.which && e.which == 13) || (e.keyCode && e.keyCode == 13)) {  
        showLoadingPanel();
        addItem();  
        e.preventDefault();
        return false;  
    } else {  
        return true;  
    }  
});  



function addItem() {
$.post("/additem",	{ name: $("#inputName").val(), public: $("#add_public").val(), routine: $("#add_routine").val(), comment: $("#add_comment").val(), tags: $("#add_tags").val(), inputDate: $("#inputDate").val() },
   function(data){     
	$('#content').load('/ajax/render/?func=undone&template=calit2');
	$("#inputName").val("");
	$("#add_public").val("");
	$("#add_routine").val("");
	$("#add_comment").val("");
	$("#add_tags").val("");
	$("#inputDate").val("");
   }
   , "success" 
);
}










//End of the $ function.
});


$(document).ready(function() {
$("#additem_more").toggle("fast");
$("#toggle").click(function () {
      $("#additem_more").toggle("fast");
    });   
})

</script>

<body>
<div id="wrap">

	<div id="header">
		<p id="toplinks">
		{% if UserLoggedIn %}													 
			<a href="/user/{{UserID}}/setting">设置</a> | 
            <a href="/Logout/">登出</a> | 
		{% else %}
			<a href="/Login/">使用Google帐户登录</a><small><a href="/docs/why_google_account">(?)</a></small> | 
		{% endif %}
		
		<a href="/docs/">文档中心</a> | 
        <a href="/about">关于</a> | 
        <a href="/guestbook">意见反馈</a>
		</p>

		<h1><a href="index.html">CheckNerds<span class="fade"> r</span>1.1</a></h1>
		<p id="slogan">{{htmltag_today}}</p>
	</div>


    <div id="loadingpanel">
        <img src="img/calit2/loading.gif">    
    </div>

	<div id="navitabs">
        <a id="tab_undone" class="activenavitab" href="javascript:void(0);">未完成</a><span class="hide"> | </span>
		<a id="tab_dailyroutine" class="navitab" href="javascript:void(0);">每日</a><span class="hide"> | </span>
		<a id="tab_done" class="navitab" href="javascript:void(0);">已做</a>
	</div>

    <div id="additem">
        <input type="text" id="inputName" name="name" style="width:90%;
       padding: 5px 3px 5px 10px; float: left; height: 18px; color: rgb(105, 105, 105); font-size: 1.2em;">
        <span id="toggle" title="toggle">&darr;</span>

		<p id="additem_more">内容<textarea name="comment" id="add_comment" rows="2" style="width:315px" wrap="PHYSICAL"></textarea><br />
		类别<input type="text" name="tags" id="add_tags" style="width: 180px" value="">
		<select name="routine" id="add_routine">
			<option value="none" selected="selected" >非坚持性任务</option>
			<option value="daily">每天</option>
        </select>
		<select name="public" id="add_public">
			<option selected="selected" value="private">不公开</option>
			<option value="public">完全公开</option>
			<option value="publicOnlyforFriends">仅对朋友公开</option>
		</select>
        预计完成<input type="text" class="sl" name="inputDate" id="inputDate" style="width: 80px"  value="" /></p>
	</div>


	<div id="content">
		<p class="box"><strong>Now</strong> Loading...<a href="https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&amp;business=paypal%40andreasviklund%2ecom&amp;item_name=Donations%20for%20andreasviklund%2ecom&amp;item_number=2007&amp;no_shipping=0&amp;cn=Comments%20%28optional%29&amp;tax=0&amp;currency_code=USD&amp;lc=SE&amp;bn=PP%2dDonationsBF&amp;charset=UTF%2d8">donation</a> of any amount through PayPal. All donations are used to develop new templates and to keep the template site online. Top donors will get their name and link listed on the site (if wanted). Advertising options are also available. Contact me for more information!</p>
	</div>

	<div id="sidebar">
		<h2>Action:</h2>
		<ul>
		</ul>

		<h2>Sample updates</h2>
		<p><strong>April 24, 2008</strong><br />
New version released: 1024px v3.0, with minor fixes and additional styles.</p>

	</div>

	<div id="footer">
		<p>CheckNerds, Online todo-list app. Powered by Google App Engine.<br />
&copy; 2008-2009 <a href="http://cnborn.net">CNBorn</a> | Design by Stylish <a href="http://www.stylishtemplate.com/">Website Templates</a>, Mod by CNBorn</p>
	</div>

</div>
</body>
</html>
