<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta name="description" content="Your description goes here" />
	<meta name="keywords" content="your,keywords,goes,here" />
	<meta name="author" content="Your Name" />
<!-- from former CheckNerds -->
<script type="text/javascript" src="/js/jquery-1.3.2.min.js"></script>
<script type="text/javascript" src="/js/jquery.form.js"></script>
<link rel="stylesheet" media="screen" type="text/css" href="/css/datepicker.css" />
<script type="text/javascript" src="/js/datepicker.js"></script>
<!-- from former CheckNerds -->
	<link rel="stylesheet" type="text/css" href="{{PrefixCSSdir}}css/calit2.css" title="1024px" media="screen,projection" />
	<title>CheckNerds California test</title>
</head>
<script type="text/javascript">
/*
Planning to have a js function here to handle the tab->activetab issue.
$('#content').load('/ajax/frontpage_getfriendstats');
$('#tab_dailyroutine').
$('#content').load('/ajax/render/?func=done&template=calit2');
 */

$(function(){
//Common function for centering a div.
//http://stackoverflow.com/questions/210717/what-is-the-best-way-to-center-a-div-on-the-screen-using-jquery/
jQuery.fn.center = function () {
    this.css("position","absolute");
    this.css("top", ( $(window).height() - this.height() ) / 3+$(window).scrollTop() + "px");
    this.css("left", ( $(window).width() - this.width() ) / 2+$(window).scrollLeft() + "px");
    return this;
}

function showLoadingPanel() {
    $("#loadingpanel").center();
    $("#loadingpanel").fadeIn('normal');
}

function hideLoadingPanel() {
    $("#loadingpanel").fadeOut('normal');
}


//Controls the Toggle.
$('span#toggle').click(function(){
    $(this).toggleClass("down");
});


function tabs_RemoveActive() {
    $('tab_undone').removeClass('activenavitab');
    $('tab_dailyroutine').removeClass('activenavitab');
    $('tab_done').removeClass('activenavitab');
    $('tab_friends').removeClass('activenavitab');
    $('tab_settings').removeClass('activenavitab');
    $('tab_log').removeClass('activenavitab');
    
    $('tab_undone').addClass('navitab');
    $('tab_dailyroutine').addClass('navitab');
    $('tab_done').addClass('navitab');
    $('tab_friends').addClass('navitab');
    $('tab_settings').addClass('navitab');
    $('tab_log').addClass('navitab');

}

//Functions for Tabs.
$('#tab_undone').click(function() {
    tabs_RemoveActive();
    $(this).addClass('activenavitab');
    $('#itemlist').load('/ajax/render/?func=undone&template=calit2');
    showLoadingPanel();
    $('#itemlist').show('normal');
    hideLoadingPanel();
    return false;
});


$('#tab_dailyroutine').click(function() {
    tabs_RemoveActive();
    $(this).addClass('activenavitab');
    $('#itemlist').load('/ajax/render/?func=dailyroutine&template=calit2');
    showLoadingPanel();
    $('#itemlist').show('normal');
    hideLoadingPanel();
    return false;
});

$('#tab_done').click(function() {
    tabs_RemoveActive();
    $(this).addClass('activenavitab');
    $('#itemlist').load('/ajax/render/?func=done&template=calit2');
    showLoadingPanel();
    $('#itemlist').show('normal');
    hideLoadingPanel();
    return false;
});

//Functions to run during loading..
hideLoadingPanel();
$('#tab_undone').click();




//Enter to submit.
$("#inputName").keypress(function (e) {  
    if ((e.which && e.which == 13) || (e.keyCode && e.keyCode == 13)) {  
        showLoadingPanel();
        addItem();  
        e.preventDefault();
        return false;  
    } else {  
        return true;  
    }  
});  



function addItem() {
$.post("/additem",	{ name: $("#inputName").val(), public: $("#add_public").val(), routine: $("#add_routine").val(), comment: $("#add_comment").val(), tags: $("#add_tags").val(), inputDate: $("#inputDate").val() },
   function(data){     
	$('#itemlist').load('/ajax/render/?func=undone&template=calit2');
	$("#inputName").val("");
	$("#add_public").val("");
	$("#add_routine").val("");
	$("#add_comment").val("");
	$("#add_tags").val("");
	$("#inputDate").val("");
   }
   , "success" 
);
}










//End of the $ function.
});


$(document).ready(function() {
$("#additem_more").toggle("fast");
$("#toggle").click(function () {
      $("#additem_more").toggle("fast");
    });   
})

</script>

<body>

	<div id="header">
		<p id="toplinks">
		{% if UserLoggedIn %}													 
            <a href="/Logout/">登出</a> | 
		{% else %}
			<a href="/Login/">使用Google帐户登录</a><small><a href="/docs/why_google_account">(?)</a></small> | 
		{% endif %}
		<a href="/docs/">文档中心</a> | 
        <a href="/about">关于</a> | 
        <a href="/guestbook">意见反馈</a>
		</p>

        <h1>CheckNerds</h1>
	</div>





<div id="wrap">
	{% if UserLoggedIn %}													 
    <div id="loadingpanel">
        <img src="img/calit2/loading.gif">    
    </div>

	<div id="navitabs">
        <span class="slogan">{{UserNickName}}</span>
        <a id="tab_undone" class="activenavitab" href="javascript:void(0);">未完成</a><span class="hide"> | </span>
		<a id="tab_dailyroutine" class="navitab" href="javascript:void(0);">每日</a><span class="hide"> | </span>
		<a id="tab_done" class="navitab" href="javascript:void(0);">已做</a>
        <a id="tab_friends" class="navitab" href="javascript:void(0);">友邻</a>
		<a id="tab_settings" class="navitab" href="javascript:void(0);">设置</a>
		<a id="tab_log" class="navitab" href="javascript:void(0);">记录</a>
	</div>



    <div id="content">
        <div id="additem">
        <input type="text" id="inputName" name="name" style="width:90%;
       padding: 5px 3px 5px 10px; float: left; height: 18px; color: rgb(105, 105, 105); font-size: 1.2em;">
        <span id="toggle" title="toggle">&darr;</span>

		<p id="additem_more">内容<textarea name="comment" id="add_comment" rows="2" style="width:315px" wrap="PHYSICAL"></textarea><br />
		类别<input type="text" name="tags" id="add_tags" style="width: 180px" value="">
		<select name="routine" id="add_routine">
			<option value="none" selected="selected" >非坚持性任务</option>
			<option value="daily">每天</option>
        </select>
		<select name="public" id="add_public">
			<option selected="selected" value="private">不公开</option>
			<option value="public">完全公开</option>
			<option value="publicOnlyforFriends">仅对朋友公开</option>
		</select>
        预计完成<input type="text" class="sl" name="inputDate" id="inputDate" style="width: 80px"  value="" /></p>
        </div>

        <div id="itemlist"></div>

		<p class="box"><strong>Now</strong> Loading...<a href="">donation</a> of any amount through PayPal.</p>
	</div>

	<div id="sidebar">

		<h2>{{htmltag_today}}</h2>
        <img src='/image?avatar={{UserID}}' align=center width=64 height=64>
        <br />
        <br />
        <p>New version released: 1024px v3.0, with minor fixes and additional styles.</p>
<ul>
    <li>xxxxx</li>
    <li>xxxxx</li>
    <li>xxxxx</li>
		</ul>
	
        

	</div>
    
    {% else %}
    <div id="album">
        <img src="/img/calit2/chk002.jpg"> 
        <div id="album1">
            受够了繁琐的项目管理？面对任务列表上的诸多任务不知所措？如何能把自己每天要做的事情培养成一种习惯？<BR><BR>
			CheckNerds是一个简单的任务管理网站。使用它，您可以方便地管理所有您要完成的事情。无论是将杂乱的事项分门别类地整理，还是提醒您优先处理即将到期的任务，CheckNerds都游刃有余<BR><BR>
			更为重要的是CheckNerds可以提醒您每天都必须完成的工作，并且记录您完成这些工作的情况。<BR><BR>
            想太多无益，请立即开始吧！        </div>

    </div>

    {% endif %}

	<div id="footer">
		<p>CheckNerds, Online todo-list app. Powered by Google App Engine.<br />
&copy; 2008-2009 <a href="http://cnborn.net">CNBorn</a> | Design by Stylish <a href="http://www.stylishtemplate.com/">Website Templates</a>, Mod by CNBorn</p>
	</div>

</div>
</body>
</html>
